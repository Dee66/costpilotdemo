<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 700">
  <defs>
    <linearGradient id="baselineGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="regressionGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ef4444;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#dc2626;stop-opacity:1" />
    </linearGradient>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#6b7280" />
    </marker>
    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#dc2626" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="500" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="26" font-weight="bold" fill="#1f2937">
    CostPilot Demo Architecture
  </text>
  <text x="500" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#6b7280">
    Baseline (Green) vs PR Regression (Red Highlights)
  </text>
  
  <!-- Baseline Stack (Left) -->
  <rect x="50" y="100" width="400" height="500" rx="8" fill="#f0fdf4" stroke="#10b981" stroke-width="3"/>
  <text x="250" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#047857">
    Baseline Stack ($57/month)
  </text>
  
  <!-- ALB -->
  <rect x="80" y="160" width="340" height="60" rx="5" fill="url(#baselineGradient)" stroke="#059669" stroke-width="2"/>
  <text x="250" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    Application Load Balancer
  </text>
  <text x="250" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    $16.20/month
  </text>
  
  <!-- API Instances -->
  <rect x="80" y="240" width="160" height="80" rx="5" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="160" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#065f46">
    API Autoscaling Group
  </text>
  <text x="160" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#047857">
    t3.micro (2-4 instances)
  </text>
  <text x="160" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#047857">
    $22.50/month
  </text>
  
  <!-- Worker -->
  <rect x="260" y="240" width="160" height="80" rx="5" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="340" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#065f46">
    Background Worker
  </text>
  <text x="340" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#047857">
    t3.micro (1-2 instances)
  </text>
  <text x="340" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#047857">
    $7.50/month
  </text>
  
  <!-- SQS Queue -->
  <rect x="80" y="340" width="160" height="60" rx="5" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="160" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#065f46">
    SQS Job Queue
  </text>
  <text x="160" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#047857">
    ~$1/month
  </text>
  
  <!-- S3 Buckets -->
  <rect x="260" y="340" width="160" height="60" rx="5" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="340" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#065f46">
    S3 Buckets
  </text>
  <text x="340" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#047857">
    Lifecycle: 30d | $2.30/month
  </text>
  
  <!-- CloudWatch -->
  <rect x="80" y="420" width="340" height="60" rx="5" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="250" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#065f46">
    CloudWatch Logs
  </text>
  <text x="250" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#047857">
    Retention: 30 days | $5/month
  </text>
  
  <!-- Policy -->
  <rect x="80" y="500" width="340" height="80" rx="5" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="250" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#92400e">
    CostPilot Policy: default_ec2_type.yml
  </text>
  <text x="250" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#78350f">
    Enforces: t3.micro as default
  </text>
  <text x="250" y="565" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#78350f">
    Status: ✓ Compliant
  </text>
  
  <!-- Arrows (Baseline) -->
  <line x1="250" y1="220" x2="160" y2="240" stroke="#6b7280" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="250" y1="220" x2="340" y2="240" stroke="#6b7280" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="160" y1="320" x2="160" y2="340" stroke="#6b7280" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="340" y1="320" x2="340" y2="340" stroke="#6b7280" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- PR Regression Stack (Right) -->
  <rect x="550" y="100" width="400" height="500" rx="8" fill="#fef2f2" stroke="#ef4444" stroke-width="3"/>
  <text x="750" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#dc2626">
    PR Regression Stack ($609/month)
  </text>
  
  <!-- ALB with logging -->
  <rect x="580" y="160" width="340" height="60" rx="5" fill="#fca5a5" stroke="#dc2626" stroke-width="2"/>
  <text x="750" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#7f1d1d">
    ALB + Access Logs
  </text>
  <text x="750" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#7f1d1d">
    $16.20 + logs | ⚠️ Regression
  </text>
  
  <!-- API Instances (Upgraded) -->
  <rect x="580" y="240" width="160" height="80" rx="5" fill="#fca5a5" stroke="#dc2626" stroke-width="3"/>
  <text x="660" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#7f1d1d">
    API Autoscaling
  </text>
  <text x="660" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#991b1b">
    t3.xlarge (2-4) ⚠️
  </text>
  <text x="660" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#7f1d1d">
    $499.20/month (+2119%)
  </text>
  
  <!-- Worker (Upgraded) -->
  <rect x="760" y="240" width="160" height="80" rx="5" fill="#fca5a5" stroke="#dc2626" stroke-width="3"/>
  <text x="840" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#7f1d1d">
    Worker
  </text>
  <text x="840" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#991b1b">
    t3.small (2-4) ⚠️
  </text>
  <text x="840" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#7f1d1d">
    $30/month (+300%)
  </text>
  
  <!-- SQS (same) -->
  <rect x="580" y="340" width="160" height="60" rx="5" fill="#fee2e2" stroke="#ef4444" stroke-width="1"/>
  <text x="660" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#7f1d1d">
    SQS Queue
  </text>
  <text x="660" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#991b1b">
    ~$1/month (same)
  </text>
  
  <!-- S3 (Lifecycle disabled) -->
  <rect x="760" y="340" width="160" height="60" rx="5" fill="#fca5a5" stroke="#dc2626" stroke-width="3"/>
  <text x="840" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#7f1d1d">
    S3 Buckets
  </text>
  <text x="840" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#991b1b">
    Lifecycle: OFF ⚠️ | $56/month
  </text>
  
  <!-- CloudWatch (Infinite retention) -->
  <rect x="580" y="420" width="340" height="60" rx="5" fill="#fca5a5" stroke="#dc2626" stroke-width="3"/>
  <text x="750" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#7f1d1d">
    CloudWatch Logs
  </text>
  <text x="750" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#991b1b">
    Retention: INFINITE ⚠️ | $17/month
  </text>
  
  <!-- Policy Violation -->
  <rect x="580" y="500" width="340" height="80" rx="5" fill="#fee2e2" stroke="#dc2626" stroke-width="3"/>
  <text x="750" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#991b1b">
    Policy Violation Detected
  </text>
  <text x="750" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f1d1d">
    t3.xlarge violates default_ec2_type policy
  </text>
  <text x="750" y="565" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f1d1d">
    Status: ✗ Non-compliant
  </text>
  
  <!-- Arrows (PR) -->
  <line x1="750" y1="220" x2="660" y2="240" stroke="#dc2626" stroke-width="2" marker-end="url(#arrowRed)"/>
  <line x1="750" y1="220" x2="840" y2="240" stroke="#dc2626" stroke-width="2" marker-end="url(#arrowRed)"/>
  <line x1="660" y1="320" x2="660" y2="340" stroke="#6b7280" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="840" y1="320" x2="840" y2="340" stroke="#dc2626" stroke-width="2" marker-end="url(#arrowRed)"/>
  
  <!-- Comparison Arrow -->
  <line x1="470" y1="350" x2="530" y2="350" stroke="#6366f1" stroke-width="4" marker-end="url(#arrow)" stroke-dasharray="10,5"/>
  <text x="500" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#4f46e5">
    CostPilot
  </text>
  <text x="500" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#4f46e5">
    +$552/month
  </text>
  <text x="500" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#4f46e5">
    (+964%)
  </text>
  
  <!-- Legend -->
  <rect x="50" y="630" width="900" height="50" rx="5" fill="#f9fafb" stroke="#e5e7eb" stroke-width="1"/>
  <circle cx="80" cy="655" r="8" fill="#10b981"/>
  <text x="95" y="660" font-family="Arial, sans-serif" font-size="11" fill="#374151">
    Baseline (Cost-Efficient)
  </text>
  
  <circle cx="280" cy="655" r="8" fill="#ef4444"/>
  <text x="295" y="660" font-family="Arial, sans-serif" font-size="11" fill="#374151">
    Regression (Cost Increase)
  </text>
  
  <circle cx="480" cy="655" r="8" fill="#f59e0b"/>
  <text x="495" y="660" font-family="Arial, sans-serif" font-size="11" fill="#374151">
    Policy Enforcement
  </text>
  
  <text x="700" y="660" font-family="Arial, sans-serif" font-size="11" fill="#6b7280">
    Demo: PR #42 | github.com/Dee66/costpilotdemo
  </text>
</svg>
